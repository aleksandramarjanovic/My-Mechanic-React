(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{152:function(e,t,n){},351:function(e,t,n){},354:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),i=n(27),s=n.n(i),r=(n(152),n(15)),o=n(16),l=n(18),u=n(17),d=n(36),h=n(147),j=n(145),b=n(61),p=n(146),m=(n(351),n(19)),v=n.n(m);function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/\D+/g,"")}n(352);var f=n(1),g=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var c;return Object(r.a)(this,n),(c=t.call(this,e)).handleCallback=function(e,t){var n=e.issuer;t&&c.setState({issuer:n})},c.handleInputFocus=function(e){var t=e.target;c.setState({focused:t.name})},c.handleInputChange=function(e){var t=e.target;"number"===t.name?t.value=function(e){if(!e)return e;var t,n=v.a.fns.cardType(e),c=O(e);switch(n){case"amex":t="".concat(c.slice(0,4)," ").concat(c.slice(4,10)," ").concat(c.slice(10,15));break;case"dinersclub":t="".concat(c.slice(0,4)," ").concat(c.slice(4,10)," ").concat(c.slice(10,14));break;default:t="".concat(c.slice(0,4)," ").concat(c.slice(4,8)," ").concat(c.slice(8,12)," ").concat(c.slice(12,19))}return t.trim()}(t.value):"expiry"===t.name?t.value=function(e){var t=O(e);return t.length>=3?"".concat(t.slice(0,2),"/").concat(t.slice(2,4)):t}(t.value):"cvc"===t.name&&(t.value=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=O(e),a=4;if(n.number){a="amex"===v.a.fns.cardType(n.number)?4:3}return c.slice(0,a)}(t.value)),c.setState(Object(j.a)({},t.name,t.value))},c.handleSubmit=function(e){e.preventDefault();var t=Object(h.a)(e.target.elements).filter((function(e){return e.name})).reduce((function(e,t){return e[t.name]=t.value,e}),{});c.save(t),c.clearEntries(),c.form.reset()},c.clearEntries=function(){c.setState({name:"",number:"",expiry:"",cvc:"",focused:"",issuer:"",formData:""})},c.state={id:e.id,number:"",name:"",expiry:"",cvc:"",focused:""},c.handleInputChange=c.handleInputChange.bind(Object(b.a)(c)),c}return Object(o.a)(n,[{key:"save",value:function(e){var t={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(e)};fetch("/payment",t).then((function(e){return e.json()})).then((function(e){return alert("Payment finished with success = "+e.success)})).catch((function(e){alert("Error in saving record!!!!!")}))}},{key:"render",value:function(){var e,t=this,n=this.state,c=n.name,a=n.number,i=n.expiry,s=n.cvc,r=n.focused,o=n.issuer,l=n.formData;return Object(f.jsxs)("div",{id:"main",children:[Object(f.jsx)("div",{id:"card",children:Object(f.jsx)(p.a,{number:a,name:c,expiry:i,cvc:s,focused:r,callback:this.handleCallback})}),Object(f.jsxs)("div",{children:[Object(f.jsxs)("form",{id:"paymentForm",ref:function(e){return t.form=e},onSubmit:this.handleSubmit,children:[Object(f.jsx)("input",{type:"tel",name:"number",className:"form-control",placeholder:"Card Number E.g.: 49..., 51..., 36..., 37...",pattern:"[\\d| ]{16,22}",required:!0,onChange:this.handleInputChange,onFocus:this.handleInputFocus}),Object(f.jsx)("input",{type:"text",name:"name",className:"form-control",placeholder:"Name",required:!0,onChange:this.handleInputChange,onFocus:this.handleInputFocus}),Object(f.jsxs)("div",{id:"cvv",children:[Object(f.jsx)("input",{type:"tel",name:"expiry",className:"form-control",placeholder:"Valid Thru: MM/YY",pattern:"(?:0[1-9]|1[0-2])\\/2[1-9]",required:!0,onChange:this.handleInputChange,onFocus:this.handleInputFocus}),Object(f.jsx)("input",{type:"tel",name:"cvc",className:"form-control",placeholder:"CVC",pattern:"\\d{3}",required:!0,onChange:this.handleInputChange,onFocus:this.handleInputFocus})]}),Object(f.jsx)("input",{type:"hidden",name:"issuer",value:o}),Object(f.jsxs)("div",{id:"buttons",children:[Object(f.jsx)("button",{id:"pay",children:"PAY"}),Object(f.jsx)("br",{})]})]}),Object(f.jsx)("button",{id:"cancelBtn",onClick:this.props.cancelPayment,children:"CANCEL"})]}),l&&Object(f.jsx)("div",{className:"App-highlight",children:(e=l,Object.keys(e).map((function(t){return"".concat(t,": ").concat(e[t])}))).map((function(e,t){return Object(f.jsx)("div",{children:e},t)}))})]})}}]),n}(a.a.Component),x=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){return Object(r.a)(this,n),t.call(this,e)}return Object(o.a)(n,[{key:"render",value:function(){return Object(f.jsx)("div",{id:"info",children:Object(f.jsxs)("div",{id:"allAboutMechanic",children:[Object(f.jsxs)("div",{id:"title",children:[this.props.mechanic.name," ",Object(f.jsx)("br",{})]}),Object(f.jsx)("img",{id:"pictureCar",src:"automehanicar.jpg",alt:" "})," ",Object(f.jsx)("br",{}),Object(f.jsx)("img",{id:"placeIcon",src:"location.png",alt:" "}),this.props.mechanic.address," ",Object(f.jsx)("br",{}),Object(f.jsxs)("div",{id:"about",children:[Object(f.jsx)("div",{id:"titleAbout",children:" About us: "}),"  ",Object(f.jsx)("br",{}),this.props.mechanic.description,Object(f.jsx)("br",{})]}),Object(f.jsxs)("div",{id:"Phone",children:[Object(f.jsx)("img",{id:"callIcon",src:"call.png",alt:" "}),this.props.mechanic.phoneNumber]})," ",Object(f.jsx)("br",{}),Object(f.jsxs)("button",{id:"hireButton",onClick:this.props.showPayment,children:[" Hire me  ",this.props.mechanic.price,"\u20ac"]})]})})}}]),n}(a.a.Component),y=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.call(this)).state={mechanics:[],mapPosition:{lat:0,lng:0},markerPosition:{lat:0,lng:0},showPayment:!1},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;fetch("/mechanics").then((function(e){return e.json()})).then((function(t){e.setState({mechanics:t})})),navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(t){e.setState({mapPosition:{lat:parseFloat(t.coords.latitude),lng:parseFloat(t.coords.longitude)},markerPosition:{lat:t.coords.latitude,lng:t.coords.longitude}})}))}},{key:"showPayment",value:function(){this.setState({showPayment:!0})}},{key:"cancelPayment",value:function(){this.setState({showPayment:!1})}},{key:"showInfo",value:function(e){var t=Object(f.jsx)(x,{mechanic:e,showPayment:this.showPayment.bind(this)});s.a.render(t,document.getElementById("MechanicInf"))}},{key:"render",value:function(){var e=this,t=this.state,n=t.mechanics,c=t.showPayment,a=Object(d.withScriptjs)(Object(d.withGoogleMap)((function(t){return Object(f.jsx)(d.GoogleMap,{defaultZoom:13,defaultCenter:{lat:e.state.mapPosition.lat,lng:e.state.mapPosition.lng},children:n.map((function(t){return Object(f.jsx)(d.Marker,{position:{lat:t.longitude,lng:t.latitude},icon:{url:"/Icon.jpg",scaledSize:new window.google.maps.Size(20,20)},children:Object(f.jsx)(d.InfoWindow,{children:Object(f.jsxs)("div",{onClick:e.showInfo.bind(e,t),children:[t.name,",",Object(f.jsx)("br",{}),"\u20ac ",t.price]})})})}))})})));return Object(f.jsxs)("div",{children:[!c&&Object(f.jsxs)("div",{id:"mapInf",children:[Object(f.jsx)("div",{id:"mapaDisplay",children:Object(f.jsx)(a,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyDmoL5HOyB_ldN_oOPyclF4_yxj3Uhv1vc&v=3.exp&libraries=geometry,drawing,places",loadingElement:Object(f.jsx)("div",{style:{height:"100%"}}),containerElement:Object(f.jsx)("div",{style:{height:"100%"}}),mapElement:Object(f.jsx)("div",{style:{height:"100%"}})})}),Object(f.jsx)("div",{id:"MechanicInf"})]}),c&&Object(f.jsx)(g,{cancelPayment:this.cancelPayment.bind(this)})]})}}]),n}(a.a.Component),C=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(f.jsxs)("div",{id:"firstPage",children:[Object(f.jsx)("div",{id:"background"}),Object(f.jsx)("div",{id:"startMap",children:Object(f.jsx)("button",{id:"OpenMap",onClick:this.props.findMechanic,children:"FIND MECHANIC "})})]})}}]),n}(n(0).Component),P=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var c;return Object(r.a)(this,n),(c=t.call(this,e)).state={startMechanicPage:!0,mapPage:!1},c}return Object(o.a)(n,[{key:"render",value:function(){var e=this;return Object(f.jsx)("div",{children:Object(f.jsxs)("div",{children:[this.state.startMechanicPage&&Object(f.jsx)(C,{findMechanic:function(t){e.setState({startMechanicPage:!1,mapPage:!0})}}),this.state.mapPage&&Object(f.jsx)("div",{style:{width:"100%",height:"100%"},children:Object(f.jsx)(y,{})})]})})}}]),n}(a.a.Component),k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,355)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),i(e),s(e)}))};s.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(P,{})}),document.getElementById("root")),k()}},[[354,1,2]]]);
//# sourceMappingURL=main.2fd1f8e0.chunk.js.map